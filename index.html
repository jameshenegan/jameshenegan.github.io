<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Jim Henegan | Home</title>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

  <!-- Load d3.js -->
  <script src="https://d3js.org/d3.v4.js"></script>

</head>

<body>

  <nav>
    <div class="blue nav-wrapper">
      <a href="#" class="brand-logo">The Expected and the Observed</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="views/viz.html">Visualizations</a></li>
        <li><a href="views/blog.html">Blog</a></li>
        <li><a href="views/projects.html">Projects</a></li>
        <li><a href="views/resources.html">Resources</a></li>
        <li><a href="views/about.html">About</a></li>
      </ul>
    </div>
  </nav>

  <div class="container">

    <!-- Create a div where the graph will take place -->
    <div id="my_dataviz" class= "center"></div>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>

        // create the svg area
        var svg = d3.select("#my_dataviz")
          .append("svg")
            .attr("width", 440)
            .attr("height", 440)
          .append("g")
            .attr("transform", "translate(220,220)")
        
        // create a matrix
        var matrix = [
          [0,  0, 103, 0],
          [0, 0, 0, 103],
          [ 98, 5, 0, 0],
          [ 5,   98,  0,0]
        ];
        
        // 4 groups, so create a vector of 4 colors
        var colors = [ "#440154ff", "#31668dff", "#37b578ff", "#fde725ff"]
        
        // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon
        var res = d3.chord()
            .padAngle(0.05)
            .sortSubgroups(d3.descending)
            (matrix)
        
        // add the groups on the outer part of the circle
        svg
          .datum(res)
          .append("g")
          .selectAll("g")
          .data(function(d) { return d.groups; })
          .enter()
          .append("g")
          .append("path")
            .style("fill", function(d,i){ return colors[i] })
            .style("stroke", "black")
            .attr("d", d3.arc()
              .innerRadius(200)
              .outerRadius(210)
            )
        
        // Add the links between groups
        svg
          .datum(res)
          .append("g")
          .selectAll("path")
          .data(function(d) { return d; })
          .enter()
          .append("path")
            .attr("d", d3.ribbon()
              .radius(200)
            )
            .style("fill", function(d){ return(colors[d.source.index]) }) // colors depend on the source group. Change to target otherwise.
            .style("stroke", "black");
        
        </script>
</body>

</html>